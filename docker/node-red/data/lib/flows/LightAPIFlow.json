[{"id":"8a1f99b7.ff1578","type":"function","z":"29cb43dd.74004c","name":"","func":"var room = msg.entities.find(entity => entity.entity == 'room')\nvar state = msg.entities.find(entity => entity.entity == 'state')\nvar brightness = msg.entities.find(entity => entity.entity == 'brightness')\nvar color = msg.entities.find(entity => entity.entity == 'color') \n\n\nvar json = {\n    friendly_name: room.value,\n    payload: {\n        state: state !== undefined ? state.value : undefined,\n        brightness: brightness !== undefined ? brightness.value : undefined,\n        color: color !== undefined ? color.value : undefined\n    }\n}\n\nreturn json;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":400,"wires":[["3dcbcbfa.4bd194"]]}]